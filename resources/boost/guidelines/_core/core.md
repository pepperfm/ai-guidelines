# Core — Project Guidelines (MUST)

**Версия:** 2026‑01‑30

Этот файл содержит **общие правила**, применимые ко всем проектам в репозитории (Laravel / Inertia / Nuxt UI / Vite и т.д.).
Файлы вида `10-*.md`, `11-*.md` и т.п. **расширяют** эти правила, но не должны им противоречить.

---

## 1) Приоритеты инструкций (MUST)

- **MUST > SHOULD.** При конфликте обязателен к исполнению MUST.
- Эти гайдлайны **выше** общих туториалов/примеров из интернета, если не указано иное.
- Если загружено несколько гайдлайнов, действует **каскад**: более специфичный (обычно ближе к рабочей директории) имеет больший приоритет.
- Если пользователь **явно** просит отступить от правил, это допустимо **только если** не нарушает MUST/безопасность/песочницу.

---

## 2) Язык и тон (MUST)

- **Русский — язык общения по умолчанию.**
- Имена компонентов/props/опций/слотов, названия классов/файлов, ключи `.env`, команды CLI, тексты исключений — **не переводить**.
- Для длинных англоязычных логов/трейсов:
  1) сначала дать короткое русское резюме «что сломалось и где»;
  2) затем привести небольшой релевантный фрагмент оригинала (см. §4).

---

## 3) Контейнер и выполнение команд (MUST)

- Проект работает в **Laravel Sail**. Все PHP/Artisan‑команды запускаются через `./vendor/bin/sail artisan ...`.
- **Не использовать** `docker compose exec ...` напрямую — только Sail‑обёртку.
- Примеры:
  - Миграции: `./vendor/bin/sail artisan migrate`
  - Тесты: `./vendor/bin/sail artisan test`
  - Любая Artisan‑команда: `./vendor/bin/sail artisan <command>`
  - Composer: `./vendor/bin/sail composer ...`
  - Фронтенд (bun): `./vendor/bin/sail bun ...`
- **Нельзя заявлять**, что команда была запущена/миграции применены/тесты пройдены, если это не подтверждено выводом команды.

---

## 4) Дисциплина вывода (SHOULD)

- Не вставлять в ответ «простыню» логов.
- По умолчанию достаточно:
  - 5–15 строк контекста вокруг ошибки **и/или**
  - последние 20–60 строк вывода (tail), если ошибка в конце.
- Если нужен полный лог — сначала спросить, либо предложить сохранить лог в файл и приложить путь.

---

## 5) Источники правды и актуальность (SHOULD)

- Приоритет источников:
  1) код и конфигурация репозитория;
  2) MCP‑серверы проекта;
  3) локальные «зеркала» документации в репозитории;
  4) официальные доки библиотек/фреймворков.
- При сомнениях по версии:
  - уточнить установленную версию (`composer.lock`, `package.json`) и сверять с соответствующей веткой документации.

---

## 6) Без «фоновых обещаний» (MUST)

- Нельзя отвечать в стиле «сделаю позже», «подождите», «вернусь с результатом».
- Либо выполнить задачу прямо сейчас, либо честно описать ограничение и дать следующий лучший вариант.

---

## 7) Skills (SHOULD)

Если в проекте есть каталог `.ai/skills/` — это **набор модульных навыков**.

- **Не подгружай все навыки сразу.** Выбирай 1–3 релевантных под задачу (чтобы экономить контекст/токены).
- Если задача затрагивает конкретный стек — сначала подключай профильный skill (например, Nuxt UI / Element Plus / Laravel стиль).
- В пресетах (`10-*.md`, `11-*.md`) есть список рекомендуемых skills по задачам.
